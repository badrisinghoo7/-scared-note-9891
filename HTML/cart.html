<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cart</title>
    <style>
      #cont {
        display: grid;
        grid-template-columns: repeat(4, 300px);
        gap: 10px;
        justify-content: space-around;
      }
      #cont > div {
        text-align: center;
        padding: 5px;
        border: 1px solid black;
        border-radius: 5px;
        /* margin: auto; */
      }
      #cont > div > img {
        width: 100%;
        height: 300px;
      }
    </style>
    <link rel="stylesheet" href="../CSS/nav.css">
  </head>
  <body>
    <div id="nav">
        <div class="logo">
          <img
            src="../Images/WhatsApp Image 2023-03-28 at 18.25.03.jpg"
            alt="Error"
          />
        </div>
        <a href="../index.html">HM</a>
        <div class="location">
          <option value="">location</option>
        </div>
        <input type="search" class="search" placeholder="search" />
    </div>
    <div id="cont"></div>
  </body>
  <script>
    let API = {
      data: [
        {
          name: "Classy Chair",
          brand: "Huetrap",
          img: "https://th.bing.com/th/id/OIP.nM95v_vGolSoaL-TqVh1RQHaMK?pid=ImgDet&rs=1",
          category: "Indore Furniture",
          costume: "Brown Coloured Wood Chair",
          color: "brown",
          price: "Rs.779",
          discountedprice: "700",
          discount: "10% off",
          id: "1",
        },
        {
          name: "Sofa Set",
          brand: "Sofa",
          img: "https://th.bing.com/th/id/OIP.nM95v_vGolSoaL-TqVh1RQHaMK?pid=ImgDet&rs=1",
          category: "Indore Furniture",
          costume: "Brown Coloured Wood Chair",
          color: "brown",
          price: "Rs.779",
          discountedprice: "700",
          discount: "10% off",
          id: "2",
        },
        {
          name: "King Size Bed",
          brand: "Bed",
          img: "https://th.bing.com/th/id/OIP.nM95v_vGolSoaL-TqVh1RQHaMK?pid=ImgDet&rs=1",
          category: "Indore Furniture",
          costume: "Brown Coloured Wood Chair",
          color: "brown",
          price: "Rs.779",
          discountedprice: "700",
          discount: "10% off",
          id: "4",
        },
        {
          name: "Dining Table",
          brand: "Table",
          img: "https://th.bing.com/th/id/OIP.nM95v_vGolSoaL-TqVh1RQHaMK?pid=ImgDet&rs=1",
          category: "Indore Furniture",
          costume: "Brown Coloured Wood Chair",
          color: "brown",
          price: "Rs.779",
          discountedprice: "700",
          discount: "10% off",
          id: "5",
        },
        {
          name: "Almirah",
          brand: "Pata Nahi",
          img: "https://th.bing.com/th/id/OIP.nM95v_vGolSoaL-TqVh1RQHaMK?pid=ImgDet&rs=1",
          category: "Indore Furniture",
          costume: "Brown Coloured Wood Chair",
          color: "brown",
          price: "Rs.779",
          discountedprice: "700",
          discount: "10% off",
          id: "6",
        },
      ],
    };

    let bagdata = JSON.parse(localStorage.getItem("bag")) || [];
    let container = document.getElementById("cont");
    let fetchedData = [];
    fetchedData = API.data;
    function display() {
      container.innerHTML = "";
      bagdata.forEach(function (element) {
        let card = document.createElement("div");
        let img = document.createElement("img");
        let brand = document.createElement("h2");
        let costume = document.createElement("h3");
        let price = document.createElement("h4");
        let show = document.createElement("button");
        let category = document.createElement("h3");
        let increment = document.createElement("button");
        let span = document.createElement("span");
        let decrement = document.createElement("button");
        let remove = document.createElement("button");

        img.setAttribute("src", element.img);
        increment.innerText = "+";
        increment.setAttribute("class", "inc");
        decrement.setAttribute("class", "dec");
        remove.setAttribute("class", "rem");
        span.setAttribute("class", "sp");
        decrement.innerText = "-";
        span.innerText = element.quantity;
        remove.innerText = "Remove From Bag";
        increment.addEventListener("click", function () {
          element.quantity++;
          localStorage.setItem("bag", JSON.stringify(bagdata));
          display();
        });
        decrement.addEventListener("click", function () {
          if (element.quantity > 1) {
            element.quantity--;
            localStorage.setItem("bag", JSON.stringify(bagdata));
            display();
          }
        });
        remove.addEventListener("click", function () {
          bagdata = bagdata.filter(function (ele) {
            return ele.id !== element.id;
          });
          localStorage.setItem("bag", JSON.stringify(bagdata));
          display();
        });
        brand.innerText = element.brand;
        costume.innerText = element.costume;
        price.innerText = element.price;
        category.innerText = element.category;
        card.append(
          img,
          brand,
          costume,
          category,
          price,
          increment,
          span,
          decrement,
          remove
        );
        container.append(card);
      });
    }
    display(fetchedData);
  </script>
</html>
